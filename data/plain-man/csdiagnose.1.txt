
csdiagnose(1)             BSD General Commands Manual            csdiagnose(1)

NAME
     csdiagnose -- collect information needed to diagnose CoreStorage volumes

SYNOPSIS
     csdiagnose [-f path] [-h] [-v] [dev ...]

DESCRIPTION
     csdiagnose collects information to help Apple investigate issues related
     to CoreStorage (File Vault 2, Fusion Drive, File Vault Everywhere, etc).
     This tool invokes sudo, so you will be asked to authenticate.

     This script requires csgather(1) to be installed in the PATH.

     If dev is not given, all disks in the system will be inspected.  This is
     the recommended method of invoking csdiagnose.

     Advanced users can provide a list of dev in the form of disk1 or disk1s2.
     Only information of the given dev is collected.  To fully collect infor-
     mation of a CoreStorage volume, the CoreStorage Physical Volume (i.e.,
     the Apple_CoreStorage partition), the Apple_Boot partition after the
     physical volume, and the Logical Volume published by CoreStorage (which
     can be found out using the "diskutil cs list" command) should all be pro-
     vided on the command line.

     The following information is collected:

           1.   OS version.

           2.   system logs, kernel logs, install logs, filesystem logs, and
                other useful information for CoreStorage debugging from
                /var/log.

           3.   output of "diskutil list".

           4.   output of "diskutil cs list".

           5.   output of "mount -t hfs".

           6.   "csgather -G" of every Apple_CoreStorage partition, which
                includes the CoreStorage metadata.  If a list of dev is pro-
                vided, only information on the partitions included in the list
                will be collected.

           7.   EncryptedRoot.plist of every Apple_Boot partition.  If a list
                of dev is provided, only information on the partitions
                included in the list will be collected.

           8.   timestamps of the files relevant to kextcache/kextd.

     The following user information is contained in the collected file:

           1.   Number and types of disks attached to the system.

           2.   The volume names, UUIDs, and size of each partition.

           3.   Encrypted versions of the volume key(s) that unlock the
                encrypted disk(s) attached to the system.  Refer to
                csgather(1) for what information could leak from the volume
                key(s).

           4.   User names, pictures, and password hints for the users.

     No other user information (such as directory structures, file names, file
     content, etc) is collected.

     The following options are available:

     -h       Show this help information.

     -f path  Specify an output path which will hold the file generated by
              this script.  By default this will be the user's Desktop folder.
              The given path must already exist.

     -v       Verbose mode, which prints every command it invokes.

SEE ALSO
     csgather(1), sysdiagnose(1)

HISTORY
     The csdiagnose utility first appeared along with CoreStorage in OS X
     10.10.0.

OS X                           February 14, 2016                          OS X
